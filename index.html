<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Points Created Through Advantages</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 2rem;
        }
        .section-header {
            font-size: 2.25rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container">
        <!-- Header -->
        <header class="text-center py-12">
            <h1 class="text-5xl font-bold text-gray-900">NBA Advantage Points Infographic</h1>
            <p class="mt-4 text-xl text-gray-600">Visualizing how NBA players create points by generating advantages.</p>
        </header>

        <!-- Infographic Section -->
        <section class="mb-16">
            <div class="card">
                <h2 class="section-header">What is "Advantage PTS Created"?</h2>
                <p class="text-lg text-center mb-8">
                    "Advantage PTS Created" is a metric that quantifies how a player's actions lead to scoring opportunities for their team. It measures the points generated from various types of advantages created on the court.
                </p>

                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mt-8">
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Ballhandler</h3>
                        <p class="text-sm">Points generated by a player handling the ball in pick-and-rolls or isolation plays, leading to a direct score.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Self-Creation</h3>
                        <p class="text-sm">Points a player scores through their own actions, such as one-on-one moves or off-the-dribble shots, without an immediate assist.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Create for Others</h3>
                        <p class="text-sm">Points generated from a player's passes that lead to a teammate's score, essentially quantifying their playmaking impact.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Basket Cuts</h3>
                        <p class="text-sm">Points created when a player makes a timely cut to the basket, catching the defense off-guard for a high-percentage score.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Movement Shooting</h3>
                        <p class="text-sm">Points from shots a player takes while moving, such as coming off screens or running in transition, leveraging their off-ball movement.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">OREB (Offensive Rebounds)</h3>
                        <p class="text-sm">Points scored by a player after securing an offensive rebound, extending the possession and creating a new scoring opportunity.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Ball Control</h3>
                        <p class="text-sm">Points created as a result of a player's ball-handling, such as from turnovers they force or from manipulating the defense with their dribble.</p>
                    </div>
                    <div class="p-6 bg-gray-50 rounded-lg shadow-inner">
                        <h3 class="text-xl font-semibold mb-2 text-blue-600">Drawing Doubles</h3>
                        <p class="text-sm">Points generated when a player's presence attracts a second defender, leaving a teammate open for a scoring play.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Tool Section -->
        <section class="mb-16">
            <div class="card">
                <h2 class="section-header">Interactive Player Visualizer</h2>
                <div class="flex flex-col items-center mb-8">
                    <label for="player-select" class="text-lg font-medium mb-2">Select a Player:</label>
                    <select id="player-select" class="w-full md:w-64 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 ease-in-out">
                        <option value="">-- Choose a Player --</option>
                    </select>
                </div>
                <div class="h-96 md:h-[500px] w-full">
                    <canvas id="player-chart"></canvas>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center py-6 text-gray-500 text-sm">
            <p>&copy; 2024 NBA Data Infographic. All rights reserved.</p>
        </footer>
    </div>

    <script>
        let playerChart = null;
        const csvFilePath = 'Advantages Created.csv';

        // Function to parse the CSV data
        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const data = lines.slice(1).map(line => {
                const values = line.split(',').map(v => v.trim());
                const player = {};
                headers.forEach((header, i) => {
                    if (i === 0) {
                        player['name'] = values[i];
                    } else {
                        player[header] = parseFloat(values[i]);
                    }
                });
                return player;
            });
            return data;
        }

        // Function to initialize the chart with data
        function initializeChart(parsedData) {
            const playerSelect = document.getElementById('player-select');
            const chartCanvas = document.getElementById('player-chart');

            // Sort the player data alphabetically by name
            parsedData.sort((a, b) => {
                return a.name.localeCompare(b.name);
            });

            // Populate the dropdown with sorted player names
            parsedData.forEach(player => {
                const option = document.createElement('option');
                option.value = player.name;
                option.textContent = player.name;
                playerSelect.appendChild(option);
            });

            const metricCategories = [
                'Self-Creation', 'Create for Others',
                'Basket Cuts', 'Movement Shooting', 'OREB',
                'Ball Control', 'Drawing Doubles'
            ];

            // Initialize the chart
            playerChart = new Chart(chartCanvas, {
                type: 'bar',
                data: {
                    labels: metricCategories,
                    datasets: [{
                        label: 'Advantage Points Created',
                        data: [],
                        backgroundColor: [
                            '#10b981', '#ef4444', '#f59e0b',
                            '#8b5cf6', '#60a5fa', '#06b6d4', '#f97316'
                        ],
                        borderColor: '#374151',
                        borderWidth: 1,
                        borderRadius: 6,
                        barPercentage: 0.8,
                        categoryPercentage: 0.9
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Points Created'
                            },
                            grid: {
                                color: 'rgba(209, 213, 219, 0.4)'
                            }
                        },
                        x: {
                             grid: {
                                color: 'rgba(209, 213, 219, 0.4)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false,
                        },
                        title: {
                            display: true,
                            text: 'Points Created by Advantage Type',
                            font: {
                                size: 18,
                                weight: 'bold'
                            }
                        },
                        tooltip: {
                            callbacks: {
                                title: (tooltipItems) => {
                                    const category = tooltipItems[0].label;
                                    const value = tooltipItems[0].raw;
                                    return `${category}: ${value} Pts`;
                                },
                                label: () => null,
                            }
                        }
                    }
                }
            });

            // Update the chart when a new player is selected
            playerSelect.addEventListener('change', (event) => {
                const selectedPlayerName = event.target.value;
                const selectedPlayer = parsedData.find(p => p.name === selectedPlayerName);

                if (selectedPlayer) {
                    const metricData = metricCategories.map(cat => selectedPlayer[cat]);
                    playerChart.data.datasets[0].data = metricData;
                    playerChart.options.plugins.title.text = `${selectedPlayerName}'s Advantage Points Creation`;
                    playerChart.update();
                } else {
                    playerChart.data.datasets[0].data = [];
                    playerChart.options.plugins.title.text = 'Please select a player';
                    playerChart.update();
                }
            });

            // Set the default selected player to Nikola Jokic
            if (parsedData.length > 0) {
                playerSelect.value = "Nikola Jokic";
                playerSelect.dispatchEvent(new Event('change'));
            }
        }

        // Fetch the CSV file and initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            fetch(csvFilePath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.text();
                })
                .then(csvData => {
                    const parsedData = parseCSV(csvData);
                    initializeChart(parsedData);
                })
                .catch(error => console.error('Error fetching the CSV file:', error));
        });
    </script>
</body>
</html>
